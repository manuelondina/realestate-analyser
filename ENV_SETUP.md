# Environment Variables Setup

This document explains how to set up environment variables for the Real Estate Analyser application.

## üîß Local Development Setup

### 1. Copy the Example File
```bash
cp .env.example .env
```

### 2. Update the `.env` File
Edit the `.env` file with your actual values:

```bash
# Database Configuration
DATABASE_URL=jdbc:postgresql://localhost:5432/your_local_db
DATABASE_USERNAME=your_username
DATABASE_PASSWORD=your_password

# OpenAI Configuration
OPENAI_API_KEY=your_actual_openai_api_key

# Development Settings
DDL_AUTO=create-drop
SHOW_SQL=true
LOG_LEVEL=DEBUG
SPRING_PROFILES_ACTIVE=development
```

## üöÄ Render Deployment

### Set Environment Variables in Render Dashboard

1. Go to your Render service dashboard
2. Navigate to **Environment** tab
3. Add the following environment variables:

| Variable | Value | Description |
|----------|-------|-------------|
| `DATABASE_URL` | Auto-generated by Render | PostgreSQL connection string |
| `DATABASE_USERNAME` | Auto-generated by Render | Database username |
| `DATABASE_PASSWORD` | Auto-generated by Render | Database password |
| `OPENAI_API_KEY` | `sk-proj-your-key...` | Your OpenAI API key |
| `DDL_AUTO` | `update` | Database schema management |
| `SHOW_SQL` | `false` | Hide SQL logs in production |
| `LOG_LEVEL` | `INFO` | Production log level |
| `SPRING_PROFILES_ACTIVE` | `production` | Environment profile |

### Database Setup on Render

1. **Create PostgreSQL Database**:
   - Go to Render Dashboard
   - Click "New +" ‚Üí "PostgreSQL"
   - Choose your plan and region
   - Note the database credentials

2. **Connect to Web Service**:
   - Render will automatically provide `DATABASE_URL`
   - Or manually set connection details

## üìù Environment Variables Reference

### Database Configuration
- **`DATABASE_URL`**: Complete JDBC URL for PostgreSQL connection
- **`DATABASE_USERNAME`**: Database user with read/write permissions
- **`DATABASE_PASSWORD`**: Database password

### JPA/Hibernate Configuration
- **`DDL_AUTO`**: Schema management strategy
  - `create-drop`: Recreate schema on startup (development)
  - `update`: Update schema as needed (production)
  - `validate`: Only validate schema (production)
  - `none`: No schema management

### OpenAI Configuration  
- **`OPENAI_API_KEY`**: API key for OpenAI services
  - Get from: https://platform.openai.com/api-keys
  - Format: `sk-proj-...`

### Server Configuration
- **`PORT`**: Server port (auto-set by Render)
- **`SPRING_PROFILES_ACTIVE`**: Active Spring profile

### Logging Configuration
- **`LOG_LEVEL`**: Minimum log level to display
  - `DEBUG`: Detailed debugging information
  - `INFO`: General information messages
  - `WARN`: Warning messages only
  - `ERROR`: Error messages only

## üîê Security Best Practices

1. **Never commit `.env` files** to version control
2. **Use different API keys** for development and production  
3. **Rotate secrets regularly**
4. **Use Render's secret management** for production
5. **Limit database user permissions** to only required tables

## üß™ Testing Environment Variables

Test that your environment variables are loaded correctly:

```bash
# Start the application
./mvnw spring-boot:run

# Check logs for:
üè† Welcome to Real Estate Analyser Application!
‚úÖ Application Started Successfully!
```

If you see database connection errors, verify your database credentials and connectivity.

## üìû Troubleshooting

### Common Issues

**Database Connection Failed**
- Check `DATABASE_URL` format
- Verify database is running and accessible
- Check firewall/network restrictions

**OpenAI API Errors** 
- Verify API key format and validity
- Check OpenAI account billing and limits

**Application Won't Start**
- Check all required environment variables are set
- Verify Spring profile configuration
- Check application logs for specific errors